!function(t,a,n,e){"use strict";var o=function(a,n){this.self=a,this.$this=t(a),this.defaults={parentId:"",url:"none",data:"none",title:"子窗体",resizable:!1,width:400,height:300,buttons:"Save",fnSaved:function(){},fnSavedAndContinue:function(){},fnCanceled:function(){},extraButtons:[],backdrop:"static",keyboard:"false"},this.options=n.constructor==Object?this.options=t.extend({},this.defaults,n):n};o.prototype={ShowMe:function(){var a=this.options,e=a.parentId,o={onSaved:a.fnSaved,onCanceled:a.fnCanceled,SavedAndClose:function(){o.onSaved&&o.onSaved(),m()},SavedAndContinue:function(){o.onSaved()},Cancel:function(){o.onCanceled&&o.onCanceled(),m()}},s={},d=this.self,i=this.$this,l=t(n.body),c=i.parents(".ztmodal").eq(0),r=function(){var a=function(a){var n=t('<button type="button" class="btn">').addClass(a.classed).html(a.text);return a.id&&n.attr("id",a.id),a.click&&!function(t){n.click(function(){t.call(d)})}(a.click),n},n=c.find(".modal-footer"),e=new Array,o=0;for(var i in s)e[o]=s[i],o++;e.sort(function(t,a){return t.index-a.index});for(var i in e)n.append(a(e[i]))},u=function(){c.modal("show")},m=function(t){c.modal("hide"),c.remove()};return a.constructor==Object&&t.get(a.url,a.data,function(n){var d=function(){var a='<div class="dialog modal inmodal ztmodal "><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close">&times;</button><h4 class="modal-title"></h4></div><div class="modal-body ztModal-body"></div><div class="modal-footer"></div></div></div></div>';c=t(a),l.append(c),c.draggable({handle:".modal-header",cursor:"move",refreshPositions:!1})},i=function(){var t={},n=0;for(var e in a.extraButtons)if(a.extraButtons.hasOwnProperty(e)){var s=a.extraButtons[e],d={index:n,id:s.id||s.text,text:s.text,classed:s.class||"btn-default",click:s.click,needClose:s.needClose};n++,t[d.id]=d}if(a.buttons.indexOf("Save")>=0){var d={index:n,text:"保存后关闭",classed:"ladda-button ladda-button-save btn-primary",needClose:!0,click:o.SaveClick};t.save=d}if(n++,a.buttons.indexOf("Continue")>=0){var d={index:n,text:"保存后继续",classed:"ladda-button ladda-button-save btn-primary",needClose:!1,click:o.SaveAndContinueClick};t.continue=d}return n++,t.cancel={index:n,text:"关闭",needClose:!0,click:o.Cancel},t};d();var u=t(".modal-body",c);t(".modal-title",c).html(a.title||""),s=i(),u.data("buttons",s),u.data("winEvents",o),u.data("parentId",e),u.html(n),t(".modal-header .close",c).click(function(){o.Cancel()}),r(),(a.class||a.classed)&&c.addClass(a.class||a.classed),t(".modal-content",c).css("width",a.width+"px"),c.modal(a);var m=t("[data-firstcontrol='true']");0==m.length&&(m=t("input:first",c),0==m.length&&(m=t("button:first",c))),m.focus()},"text"),"destroy"==a&&m(!0),"close"==a&&m(),"open"==a&&u(),d}},t.fn.ztdialog=function(t){var a=new o(this,t);return a.ShowMe(),a}}(jQuery,window,document);var inputModal=function(t,a){this.$element=t,this.defaults={title:"提示",lab_txt:"说明",textarea_id:"txt-ztreason-model-cancel-reason",txt_type:"textarea",save_func:function(){}},this.options=$.extend({},this.defaults,a)};ZTInputModal=function(t){var a=new inputModal(this,t),n='<div class="modal inmodal" id="zt-reason-submit-modal" role="dialog" aria-hidden="true"><div class="modal-dialog">    <div class="modal-content animated fadeIn">        <div class="modal-header">            <button type="button" class="close im_close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>            <h4 class="modal-title">'+a.options.title+'</h4>        </div>        <div class="modal-body">            <div class="row">                <form method="post" class="form-horizontal" autocomplete="off" >                    <label class="col-sm-3 control-label"><span style="color: red">*&nbsp;</span>'+a.options.lab_txt+'</label>                    <div class="col-sm-9">';return n+="textarea"==a.options.txt_type?'<textarea class="form-control" name="txt-ztreason-model-cancel-reason" id="txt-ztreason-model-cancel-reason" style="height: 80px;width:100%"></textarea>':'<input type="'+a.options.txt_type+'" class="form-control" name="txt-ztreason-model-cancel-reason" id="txt-ztreason-model-cancel-reason" ></input>',n+='                    </div>                </form>            </div>        </div>        <div class="modal-footer">            <button type="button" class="btn btn-primary ladda-button" id="btn-zt-reason-submit-modal-save" data-style="expand-left">保存</button>            <button type="button" class="btn btn-white im_close" id="btn-zt-reason-submit-modal-cancel">取消</button>        </div>    </div>  </div></div>',$(document.body).append(n),$win=$("#zt-reason-submit-modal"),$win.draggable({handle:".modal-header",cursor:"move",refreshPositions:!1}),$win.modal({backdrop:"static"}),$("#btn-zt-reason-submit-modal-save",$win).on("click",function(){var t=$("#btn-zt-reason-submit-modal-savesave",$win).ladda();a.options.save_func(t,$("#txt-ztreason-model-cancel-reason").val())}),$(".im_close",$win).on("click",function(){$("#zt-reason-submit-modal").modal("hide"),$("#zt-reason-submit-modal").remove()}),$win};